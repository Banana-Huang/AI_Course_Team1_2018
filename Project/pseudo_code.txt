procedure edgescan
input: sokoban grid map
outpue: sokoban grid map with deadlock points

procedure edgescan( gridmaze )
begin
    nextAction = list of next actions: up, left, down, right
    explored = use set to record visited state
    frontier = use queue as frontier
    push initial state into frontier
    push all target state into explored set
    insert initial state into explored set
    while frontier isn't empty
    begin
	currentState = pop out state from frontier
        for all actions:
	begin
	    nextstate = take action in currentState
            if nextstate is box or road, and not in the explored set
		push into frontier
		insert into explored set
	    
	    if there have two wall near currentState and shape as L
		set currentState is deadlock
	    
	    if there doesn't have two wall near currentState and shape as L
		if there have a wall at one side and there is no space 
		    can use on the wall side and there is no target on the same road
		    set currentState is deadlock 
		
	end for
    end while
end procedure edgescan